<!DOCTYPE html>
<html>
<head>
    <title>Firebase Config Updater</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial; margin: 20px; background: #1a1a1a; color: white; }
        .section { background: #2d4a5a; padding: 20px; margin: 15px 0; border-radius: 10px; }
        .current { background: #5a2d2d; }
        .new { background: #2d5a2d; }
        textarea { width: 100%; height: 200px; background: #333; color: white; border: none; border-radius: 5px; padding: 10px; font-family: monospace; }
        button { background: #4CAF50; color: white; border: none; padding: 15px 30px; margin: 10px; cursor: pointer; border-radius: 8px; font-size: 16px; }
        .copy-btn { background: #2196F3; }
        .danger-btn { background: #f44336; }
        .code { background: #333; padding: 15px; border-radius: 5px; font-family: monospace; white-space: pre-line; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Firebase Config Updater - KNPC Tank Tools</h1>
    
    <div class="section current">
        <h3>âŒ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ù„Ø§ ØªØ¹Ù…Ù„):</h3>
        <div class="code">const firebaseConfig = {
    apiKey: "AIzaSyDGpAHia_wEmrhnmYjrPf1n1TrAzwEMiAI",
    authDomain: "tank-tools.firebaseapp.com", 
    projectId: "tank-tools",
    storageBucket: "tank-tools.appspot.com",
    messagingSenderId: "278680662267",
    appId: "1:278680662267:web:d4185d8b6fb96c4df8c2dc"
};</div>
    </div>

    <div class="section">
        <h3>ğŸ”„ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¥ØµÙ„Ø§Ø­:</h3>
        <ol>
            <li><strong>Ø§Ù„Ø®ÙŠØ§Ø± 1 - Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯ (Ø§Ù„Ø£Ø³Ø±Ø¹):</strong>
                <ul>
                    <li>Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ <a href="https://console.firebase.google.com" target="_blank" style="color: #4CAF50;">Firebase Console</a></li>
                    <li>Ø£Ù†Ø´Ø¦ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³Ù…: <code>knpc-tank-tools-2025</code></li>
                    <li>ÙØ¹Ù‘Ù„ Firestore Database</li>
                    <li>Ø¶Ø¹ Firebase Rules Ø§Ù„ØªØ§Ù„ÙŠØ©:</li>
                </ul>
                <div class="code">rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}</div>
            </li>
            <li><strong>Ø§Ù„Ø®ÙŠØ§Ø± 2 - Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong>
                <ul>
                    <li>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ <a href="https://console.firebase.google.com/project/tank-tools" target="_blank" style="color: #4CAF50;">Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</a></li>
                    <li>Ø¥Ù†Ø´Ø§Ø¡ Web App Ø¬Ø¯ÙŠØ¯</li>
                    <li>Ù†Ø³Ø® Config Ø¬Ø¯ÙŠØ¯</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="section new">
        <h3>âœ… Ø§Ù„ØµÙ‚ Firebase Config Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§:</h3>
        <textarea id="newConfig" placeholder='Ø§Ù„ØµÙ‚ Ø§Ù„Ù€ Firebase config Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§ Ù…Ø«Ù„:
{
  apiKey: "AIzaSy...",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcd1234"
}'></textarea>
        <br>
        <button onclick="updateFirebaseConfig()" class="copy-btn">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
        <button onclick="testNewConfig()" class="copy-btn">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>

    <div class="section">
        <h3>âš¡ Ø­Ù„ÙˆÙ„ ÙÙˆØ±ÙŠØ©:</h3>
        <button onclick="useTemporaryConfig()" class="danger-btn">ğŸš€ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø¤Ù‚ØªØ© (Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹)</button>
        <p style="font-size: 12px; opacity: 0.7;">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙ‚Ø· ÙˆÙ‚Ø¯ Ù„Ø§ ØªØ¹Ù…Ù„ Ù„Ù„Ø¬Ù…ÙŠØ¹</p>
    </div>

    <div id="results"></div>

    <script type="module">
        let testApp, testDb;
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `section ${type === 'error' ? 'current' : type === 'success' ? 'new' : 'section'}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong> - ${message}`;
            document.getElementById('results').appendChild(div);
            console.log(message);
        }
        
        window.testNewConfig = async function() {
            const configText = document.getElementById('newConfig').value.trim();
            if (!configText) {
                addResult('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Firebase config Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            try {
                addResult('ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...', 'info');
                
                // Parse the config
                let config;
                try {
                    // Try to extract just the config object part
                    const configMatch = configText.match(/\{[\s\S]*\}/);
                    if (configMatch) {
                        const configStr = configMatch[0]
                            .replace(/(\w+):/g, '"$1":')  // Add quotes to keys
                            .replace(/'/g, '"');          // Convert single quotes to double
                        config = JSON.parse(configStr);
                    } else {
                        throw new Error('Could not extract config object');
                    }
                } catch (e) {
                    addResult('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø³ÙŠÙ‚ Config. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù†Ø³Ø® Ø§Ù„ØµØ­ÙŠØ­', 'error');
                    return;
                }
                
                // Test Firebase connection with new config
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js');
                const { getFirestore, doc, setDoc, getDoc } = await import('https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js');
                
                testApp = initializeApp(config, 'test-app');
                testDb = getFirestore(testApp);
                
                addResult('âœ… Firebase initialized successfully', 'success');
                
                // Test write/read
                const testRef = doc(testDb, 'test', 'connection');
                await setDoc(testRef, {
                    timestamp: new Date().toISOString(),
                    status: 'testing new config'
                });
                
                const docSnap = await getDoc(testRef);
                if (docSnap.exists()) {
                    addResult('ğŸ‰ Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¬Ø­! Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ', 'success');
                    addResult('âœ… ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
                } else {
                    addResult('âš ï¸ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù†Ø¬Ø­Øª Ù„ÙƒÙ† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙØ´Ù„Øª - ØªØ­Ù‚Ù‚ Ù…Ù† Firebase Rules', 'error');
                }
                
            } catch (error) {
                addResult(`âŒ ÙØ´Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${error.message}`, 'error');
                
                if (error.code === 'permission-denied') {
                    addResult('ğŸ›¡ï¸ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Firebase Rules - ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ù‡Ø§ ØµØ­ÙŠØ­', 'error');
                } else if (error.message.includes('project does not exist')) {
                    addResult('ğŸš« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ - ØªØ£ÙƒØ¯ Ù…Ù† Project ID', 'error');
                }
            }
        };
        
        window.updateFirebaseConfig = async function() {
            const configText = document.getElementById('newConfig').value.trim();
            if (!configText) {
                addResult('âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØªØ¬Ø±Ø¨Ø© Firebase config Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            addResult('ğŸ”„ Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...', 'info');
            addResult('â„¹ï¸ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ØªØªØ·Ù„Ø¨ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆØ¯ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø±', 'info');
            addResult('ğŸ“ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Fahad Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©', 'success');
        };
        
        window.useTemporaryConfig = async function() {
            addResult('âš¡ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø¤Ù‚ØªØ©...', 'info');
            
            // Test with a different project structure
            const tempConfig = {
                apiKey: "AIzaSyDGpAHia_wEmrhnmYjrPf1n1TrAzwEMiAI",
                authDomain: "tank-tools.firebaseapp.com", 
                projectId: "tank-tools",
                storageBucket: "tank-tools.appspot.com",
                messagingSenderId: "278680662267",
                appId: "1:278680662267:web:d4185d8b6fb96c4df8c2dc"
            };
            
            document.getElementById('newConfig').value = JSON.stringify(tempConfig, null, 2);
            addResult('â„¹ï¸ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©. Ø§Ø¶ØºØ· "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"', 'info');
        };
        
    </script>
</body>
</html>